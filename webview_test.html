<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'">
    <title>session test</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #output { font-size: 20px; color: #333; margin-top: 20px; }
    </style>
    <script>
        //window.onload = function() {
        //    console.log("session_id from JS:", window.__imqa_session_id);
        //    document.body.innerText = "session ID : " + window.__imqa_session_id;
        //};
        // const msg = IMQANative.getSession();
        // console.log("msg~~~~~1 : ")
        //   function ready() {
        //     console.log('DOM이 준비되었습니다!', msg);            
        //   }

        // document.addEventListener("DOMContentLoaded", ready);

        if (!window.IMQANative) {
              console.error("IMQANative not injected");
              return;
        }
        const sessionRaw = IMQANative.getSession();
        const resourcesRaw = IMQANative.getResources();
        const spanRaw = IMQANative.getSpanCommonAttribute();

        console.log("sessionRaw1  : ", sessionRaw)
        console.log("resourcesRaw1  : ", resourcesRaw)
        console.log("spanRaw1  : ", spanRaw)

        window.onload = function () {            
            console.log("sessionRaw1  : ", sessionRaw)
            console.log("resourcesRaw1  : ", resourcesRaw)
            console.log("spanRaw1  : ", spanRaw)

            document.getElementById("session").textContent = sessionRaw
            document.getElementById("resources").textContent = resourcesRaw
            document.getElementById("span").textContent = spanRaw
        }


    </script>
</head>
<body>
    <h1>세션 테스트 페이지 04081326</h1>

    <h1>IMQA WebView Bridge Test</h1>

    <h2>Session</h2>
    <pre id="session"></pre>

    <h2>Resources</h2>
    <pre id="resources"></pre>

    <h2>Span Common Attributes</h2>
    <pre id="span"></pre>

    <div id="output">세션 ID를 불러오는 중...</div>
</body>
</html>
